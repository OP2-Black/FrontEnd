<!DOCTYPE html>
<html lang="fi">
  <head>
    <meta charset="UTF-8" />
    <title>EFTU Airport Fuel Status</title>
    <style>
      .status-not-ok {
        color: red;
      }
    </style>
  </head>
  <body>
    <h1>EFTU Airport Fuel Status</h1>
    <div id="airport-info">Loading...</div>

  <script>
  function displayAirportData(airportCode) {
    fetch("https://jtjuslin.kapsi.fi/kananen/fuelprices.php")
      .then((response) => response.json())
      .then((jsonData) => {
        let data = jsonData.airportList;
        let airportData = data.find(
          (item) =>
            item.airportCode.toUpperCase() === airportCode.toUpperCase()
        );

        if (airportData) {
          let pouserStatusDisplay =
            airportData.pouserStatus === "OK"
              ? airportData.pouserStatus
              : `<span class="status-not-ok">${airportData.pouserStatus}</span>`;
          let fuelPrices = airportData.fuelPrices;
          let fuelPriceInfo = Object.entries(fuelPrices).reduce((acc, [fuelType, price]) => {
            if (price !== "NA") { 
              acc += `${fuelType} - ${price}, `;
            }
            return acc;
          }, '');

          document.getElementById("airport-info").innerHTML = `
                        <strong>Kanair:</strong> 
                        Poouser Status - ${pouserStatusDisplay}, 
                        ${fuelPriceInfo.slice(0, -2)}
                    `;
        } else {
          document.getElementById("airport-info").textContent =
            "Airport data not found.";
        }
      })
      .catch((error) => console.error("Error fetching data:", error));
  }

      displayAirportData("EFTU");
    </script>
  </body>
</html>
